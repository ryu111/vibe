* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --bg: #1e1e2e; --surface0: #313244; --surface1: #45475a; --surface2: #585b70;
  --overlay0: #6c7086; --text: #cdd6f4; --subtext0: #a6adc8; --subtext1: #bac2de;
  --blue: #89b4fa; --green: #a6e3a1; --red: #f38ba8; --yellow: #f9e2af;
  --purple: #cba6f7; --cyan: #89dceb; --pink: #f5c2e7; --orange: #fab387;
}
body { font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', 'Menlo', monospace; background: var(--bg); color: var(--text); overflow: hidden; }
.layout { display: grid; grid-template-columns: var(--sidebar-w, 230px) 1fr; height: 100vh; transition: grid-template-columns 0.3s ease; }
.layout.collapsed { --sidebar-w: 52px; }

/* Sidebar */
.sidebar { background: var(--surface0); border-right: 1px solid var(--surface1); display: flex; flex-direction: column; overflow-y: auto; overflow-x: hidden; transition: width 0.3s ease, min-width 0.3s ease; }
.sb-top { padding: 10px 12px; display: flex; align-items: center; gap: 8px; border-bottom: 1px solid var(--surface1); min-height: 40px; }
.sb-toggle { width: 28px; height: 28px; border-radius: 6px; background: var(--surface1); border: none; color: var(--text); cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: background 0.2s; }
.sb-toggle:hover { background: var(--surface2); }
.conn { font-size: 11px; display: flex; align-items: center; gap: 6px; white-space: nowrap; overflow: hidden; transition: opacity 0.3s; }
.dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; transition: background 0.3s; }
.dot.on { background: var(--green); box-shadow: 0 0 6px var(--green); }
.dot.off { background: var(--orange); animation: blink 1s infinite; }
.sb-body { padding: 8px; display: flex; flex-direction: column; gap: 4px; flex: 1; }
.collapsed .conn span:not(.dot) { display: none; }
.collapsed .sb-body { padding: 4px; }

/* Sidebar Groups */
.group-hdr { display: flex; align-items: center; justify-content: space-between; padding: 6px 4px 2px; }
.group-hdr h2 { font-size: 10px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1.5px; white-space: nowrap; overflow: hidden; }
.group-hdr .count { font-size: 9px; color: var(--overlay0); background: var(--surface1); padding: 1px 5px; border-radius: 8px; flex-shrink: 0; }
.group-sep { font-size: 9px; color: var(--overlay0); text-transform: uppercase; letter-spacing: 1px; margin-top: 6px; padding: 4px 4px 2px; border-top: 1px solid var(--surface1); display: flex; align-items: center; justify-content: space-between; white-space: nowrap; overflow: hidden; }

/* Session Card */
.sc { padding: 8px 10px; border-radius: 8px; cursor: pointer; transition: all 0.2s; border: 1px solid transparent; position: relative; }
.sc:hover { background: var(--surface1); }
.sc.selected { background: var(--surface1); border-color: var(--blue); }
.sc.live { border-color: var(--green); box-shadow: 0 0 8px rgba(166,227,161,0.15); }
.sc.live.selected { border-color: var(--green); box-shadow: 0 0 12px rgba(166,227,161,0.2); }
.sc.done { opacity: 0.55; }
.sc.done:hover { opacity: 0.8; }
.sc.stale { opacity: 0.4; }
.sc.stale:hover { opacity: 0.7; }
.sc .x { position: absolute; top: 3px; right: 5px; width: 16px; height: 16px; border-radius: 50%; background: var(--surface2); color: var(--text); font-size: 9px; line-height: 16px; text-align: center; cursor: pointer; opacity: 0; transition: all 0.2s; border: none; font-family: inherit; }
.sc:hover .x { opacity: 0.5; }
.sc .x:hover { opacity: 1; background: var(--red); color: var(--bg); }
.sc-title { font-size: 11px; font-weight: 600; display: flex; align-items: center; gap: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sc-title .badge { font-size: 8px; padding: 1px 4px; border-radius: 3px; font-weight: 400; }
.sc-title .badge.pass { background: rgba(166,227,161,0.2); color: var(--green); }
.sc-title .badge.fail { background: rgba(243,139,168,0.2); color: var(--red); }
.live-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); animation: livePulse 2s ease infinite; flex-shrink: 0; }
.sc-sub { font-size: 9px; color: var(--overlay0); margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sc-meta { font-size: 10px; color: var(--subtext0); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sc-bar { height: 3px; background: var(--surface1); border-radius: 2px; margin-top: 4px; overflow: hidden; }
.sc-bar-fill { height: 100%; background: linear-gradient(90deg, var(--blue), var(--green)); border-radius: 2px; transition: width 0.5s; }
.sc-bar-fill.complete { background: var(--green); }
.cleanup-btn { font-size: 9px; color: var(--subtext0); background: none; border: 1px solid var(--surface2); border-radius: 3px; padding: 1px 6px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
.cleanup-btn:hover { background: var(--red); color: var(--bg); border-color: var(--red); }
.stale-toggle { font-size: 9px; color: var(--overlay0); background: none; border: none; cursor: pointer; font-family: inherit; padding: 4px 4px 2px; display: flex; align-items: center; gap: 4px; width: 100%; border-top: 1px solid var(--surface1); margin-top: 6px; transition: color 0.2s; }
.stale-toggle:hover { color: var(--subtext0); }

/* Collapsed sidebar mini cards */
.collapsed .sc { padding: 6px; text-align: center; }
.collapsed .sc-title, .collapsed .sc-sub, .collapsed .sc-meta, .collapsed .sc-bar, .collapsed .sc .x, .collapsed .group-hdr, .collapsed .group-sep, .collapsed .cleanup-btn, .collapsed .stale-toggle, .collapsed .sc-res { display: none; }
.collapsed .sc::before { content: attr(data-pct); font-size: 9px; color: var(--subtext0); }

@keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
@keyframes livePulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }

/* Main */
.main { padding: 16px 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 14px; }
.main h1 { font-size: 15px; display: flex; align-items: center; gap: 8px; flex-wrap: nowrap; min-height: 32px; }
.task-badge { font-size: 10px; padding: 2px 8px; border-radius: 6px; background: var(--surface1); color: var(--subtext0); font-weight: 500; flex-shrink: 0; }

/* Progress */
.progress-bar { height: 5px; background: var(--surface1); border-radius: 3px; overflow: hidden; }
.progress-fill { height: 100%; background: linear-gradient(90deg, var(--blue), var(--green)); border-radius: 3px; transition: width 0.8s cubic-bezier(0.4,0,0.2,1); }
.progress-fill.complete { background: linear-gradient(90deg, var(--green), var(--cyan), var(--green)); background-size: 200% 100%; animation: shimmer 2s linear infinite; }
.celebrate { position: relative; }
.celebrate::after { content: 'ðŸŽ‰'; position: absolute; right: -24px; top: 50%; transform: translateY(-50%); font-size: 16px; animation: celebratePop 0.5s cubic-bezier(0.175,0.885,0.32,1.275); }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
@keyframes celebratePop { 0% { transform: translateY(-50%) scale(0); } 100% { transform: translateY(-50%) scale(1); } }

/* Agent ç‹€æ…‹é¢æ¿ï¼ˆç°¡åŒ–ç‰ˆï¼‰ */
.agent-panel { background: var(--surface0); border-radius: 10px; padding: 14px 16px; border: 1px solid var(--surface1); }
.agent-panel-hdr { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.agent-panel-hdr h3 { font-size: 11px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin: 0; }
.agent-panel-stats { display: flex; gap: 12px; }
.agent-panel-stat { font-size: 10px; color: var(--subtext0); }
.agent-panel-stat .num { font-weight: 700; color: var(--text); }
/* ç°¡åŒ–ä¸‰æ¬„ï¼š[ç‡ˆ] [åç¨±] [ç‹€æ…‹] [è€—æ™‚] */
.agent-row { display: grid; grid-template-columns: 16px 1fr auto 48px; column-gap: 8px; align-items: center; padding: 5px 4px; font-size: 11px; border-bottom: 1px solid rgba(69,71,90,0.15); transition: background 0.15s; }
.agent-row:last-child { border-bottom: none; }
.agent-row:hover { background: rgba(69,71,90,0.1); border-radius: 4px; }
.al { width: 8px; height: 8px; border-radius: 50%; justify-self: center; }
.al.running { background: var(--green); box-shadow: 0 0 8px var(--green); animation: alPulse 1.5s ease infinite; }
.al.completed { background: var(--surface2); opacity: 0.6; }
.al.error { background: var(--red); box-shadow: 0 0 6px var(--red); animation: alPulse 1.5s ease infinite; }
.al.delegating { background: var(--purple); box-shadow: 0 0 8px var(--purple); animation: alPulse 1.5s ease infinite; }
.al.idle { background: var(--surface2); opacity: 0.5; }
.al.pass { background: var(--green); opacity: 0.8; }
@keyframes alPulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }
.agent-name { font-weight: 600; display: flex; align-items: center; gap: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.agent-status-text { font-size: 10px; color: var(--subtext0); white-space: nowrap; }
.agent-status-text.running { color: var(--green); }
.agent-status-text.error { color: var(--red); }
.agent-status-text.delegating { color: var(--purple); }
.agent-status-text.pass { color: var(--green); }
.agent-dur { font-size: 10px; color: var(--subtext0); text-align: right; font-variant-numeric: tabular-nums; }
.agent-group-label { font-size: 9px; color: var(--overlay0); text-transform: uppercase; letter-spacing: 1.2px; padding: 6px 4px 2px; }
.agent-sep { border-top: 1px dashed rgba(69,71,90,0.3); margin: 4px 0; }
@media (max-width: 1100px) {
  .agent-row { font-size: 10px; }
}

/* çµ±è¨ˆå¡ç‰‡ */
.stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.stat-card { background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); display: flex; flex-direction: column; gap: 4px; min-width: 0; position: relative; cursor: default; transition: border-color 0.2s, background 0.2s; }
.stat-card:hover { border-color: var(--surface2); }
.stat-card .stat-label { font-size: 9px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.stat-card .stat-value { font-size: 20px; font-weight: 700; color: var(--text); font-variant-numeric: tabular-nums; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.stat-card .stat-sub { font-size: 9px; color: var(--overlay0); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.stat-card.warn { border-left: 3px solid var(--yellow); background: rgba(249,226,175,0.04); }
.stat-card.danger { border-left: 3px solid var(--red); background: rgba(243,139,168,0.04); }
.stat-hint { font-size: 8px; font-weight: 500; line-height: 1.2; }
.stat-hint.warn { color: var(--yellow); }
.stat-hint.danger { color: var(--red); }
.stat-card[data-tip]:hover::after { content: attr(data-tip); position: absolute; top: calc(100% + 6px); left: 0; background: var(--surface1); color: var(--subtext1); padding: 6px 10px; border-radius: 6px; font-size: 9px; white-space: normal; max-width: 220px; line-height: 1.4; z-index: 100; pointer-events: none; box-shadow: 0 4px 12px rgba(0,0,0,0.4); border: 1px solid var(--surface2); }
@media (max-width: 1100px) { .stats-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 700px) { .stats-grid { grid-template-columns: 1fr; } }

/* å‹•æ…‹ Pipeline é€²åº¦æ¢ */
.pipeline-progress { background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); }
.pipeline-progress h3 { font-size: 11px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
.pipeline-stages-bar { display: flex; gap: 4px; align-items: flex-end; flex-wrap: nowrap; overflow-x: auto; padding-bottom: 2px; }
.ps-block { flex: 1; min-width: 36px; max-width: 80px; display: flex; flex-direction: column; gap: 4px; align-items: center; }
.ps-label { font-size: 9px; color: var(--subtext0); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; text-align: center; }
.ps-bar { width: 100%; height: 8px; border-radius: 4px; background: var(--surface1); position: relative; overflow: hidden; }
.ps-bar.completed { background: var(--green); }
.ps-bar.active { background: var(--blue); animation: pulse 1.5s infinite; }
.ps-bar.failed { background: var(--red); }
.ps-bar.skipped { background: var(--surface1); opacity: 0.5; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }

/* DAG æµç¨‹åœ–ï¼ˆSVG + HTML æ··åˆï¼‰ */
.dag-container { position: relative; overflow-x: auto; overflow-y: hidden; min-height: 200px; }
.dag-node { position: absolute; background: var(--surface0); border: 2px solid var(--surface1); border-radius: 8px; padding: 8px 12px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 3px; min-width: 80px; text-align: center; z-index: 2; }
.dag-node:hover { border-color: var(--blue); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
.dag-node.completed { border-color: var(--green); background: rgba(166,227,161,0.05); }
.dag-node.active { border-color: var(--blue); background: rgba(137,180,250,0.05); animation: dagPulse 2s ease-in-out infinite; }
.dag-node.failed { border-color: var(--red); background: rgba(243,139,168,0.05); animation: dagShake 0.5s ease-in-out; }
.dag-node.skipped { opacity: 0.35; filter: grayscale(0.8); border-style: dashed; }
.dag-node.pending { opacity: 0.5; }
.dag-node.selected { border-color: var(--yellow); box-shadow: 0 0 0 1px var(--yellow); }
@keyframes dagPulse {
  0%,100% { box-shadow: 0 0 8px rgba(137,180,250,0.2); }
  50% { box-shadow: 0 0 18px rgba(137,180,250,0.4); }
}
@keyframes dagShake {
  0%,100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}
.dag-emoji { font-size: 18px; line-height: 1; }
.dag-label { font-size: 10px; font-weight: 700; letter-spacing: 0.5px; }
.dag-status { font-size: 9px; }
.dag-node.completed .dag-status { color: var(--green); }
.dag-node.active .dag-status { color: var(--blue); }
.dag-node.failed .dag-status { color: var(--red); }
.dag-node.pending .dag-status { color: var(--overlay0); }
.dag-svg { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 1; }
.dag-edge { fill: none; stroke-width: 1.5; }
.dag-edge.completed { stroke: var(--green); opacity: 0.7; }
.dag-edge.active { stroke: var(--blue); stroke-dasharray: 6 3; animation: dashFlow 1s linear infinite; }
.dag-edge.pending { stroke: var(--surface2); stroke-dasharray: 4 4; }
@keyframes dashFlow { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -18; } }

/* Phase åˆ†çµ„æ¡† */
.dag-phase { position: absolute; border: 1px solid rgba(137,180,250,0.2); border-radius: 10px; background: rgba(137,180,250,0.03); z-index: 0; }
.dag-phase-title { position: absolute; top: -10px; left: 8px; font-size: 9px; color: var(--blue); background: var(--bg); padding: 0 4px; white-space: nowrap; }

/* DAG è©³æƒ…é¢æ¿ */
.dag-detail { background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); min-height: 80px; transition: all 0.3s; }
.dag-detail h4 { font-size: 11px; color: var(--text); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
.dag-detail-row { display: flex; justify-content: space-between; padding: 2px 0; font-size: 11px; }
.dag-detail-row .label { color: var(--subtext0); }
.dag-detail-row .value { font-weight: 600; }
.dag-detail-empty { color: var(--overlay0); font-size: 10px; }
.rh-round { padding: 2px 0 2px 8px; border-left: 2px solid rgba(69,71,90,0.3); margin: 2px 0; font-size: 9px; }
.rh-round.pass { border-left-color: var(--green); }
.rh-round.fail { border-left-color: var(--red); color: var(--red); }

/* MCP çµ±è¨ˆ */
.mcp-stats { background: var(--surface0); border-radius: 10px; padding: 12px 16px; border: 1px solid var(--surface1); }
.mcp-stats h3 { font-size: 11px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; }
.mcp-stats h3 .mcp-total { font-size: 9px; font-weight: 400; }
.mcp-row { display: flex; align-items: center; gap: 8px; padding: 3px 0; font-size: 11px; }
.mcp-row .mcp-server { font-weight: 600; min-width: 90px; color: var(--cyan); }
.mcp-row .mcp-count { min-width: 36px; text-align: right; font-variant-numeric: tabular-nums; color: var(--subtext0); }
.mcp-row .mcp-bar { flex: 1; height: 4px; background: var(--surface1); border-radius: 2px; overflow: hidden; }
.mcp-row .mcp-fill { height: 100%; background: var(--cyan); border-radius: 2px; transition: width 0.5s; }
.mcp-row .mcp-methods { font-size: 9px; color: var(--overlay0); max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Info Cards */
.cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.card { background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); transition: border-color 0.2s; min-width: 0; }
.card:hover { border-color: var(--surface2); }
.card h3 { font-size: 10px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
.row { display: flex; justify-content: space-between; align-items: baseline; padding: 2px 0; font-size: 11px; gap: 8px; }
.row .label { color: var(--subtext0); flex-shrink: 0; }
.row .value { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; text-align: right; }

/* Timeline */
.timeline { background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); flex: 1; min-height: 80px; overflow: hidden; }
.timeline h3 { font-size: 10px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
.tl-item { display: flex; align-items: center; gap: 8px; padding: 4px 2px; font-size: 11px; border-bottom: 1px solid rgba(69,71,90,0.3); animation: slideIn 0.3s ease; min-width: 0; }
.tl-item:last-child { border-bottom: none; }
.tl-item:hover { background: rgba(69,71,90,0.15); border-radius: 4px; }
.tl-item .time { color: var(--overlay0); font-size: 9px; min-width: 52px; font-variant-numeric: tabular-nums; }
.tl-item .msg { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.tl-item.pass .msg { color: var(--green); }
.tl-item.fail .msg { color: var(--red); }
.tl-item.active .msg { color: var(--blue); }
@keyframes slideIn { from { opacity: 0; transform: translateX(-8px); } to { opacity: 1; transform: translateX(0); } }

/* Dashboard æ‰å¹³ Grid ä½ˆå±€ï¼ˆagent-panel èˆ‡ mini-tl åŒè¡Œç­‰é«˜ï¼‰ */
.dash-grid { display: grid; grid-template-columns: minmax(0, 1fr) minmax(0, 360px); gap: 14px; }
.dash-grid > * { grid-column: 1; min-width: 0; }
.dash-grid > .mini-tl { grid-column: 2; grid-row: 1; align-self: stretch; overflow-y: auto; }
/* Dashboard mini timeline */
.mini-tl { min-height: 0; display: flex; flex-direction: column; background: var(--surface0); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--surface1); }
.mini-tl h4 { font-size: 10px; color: var(--subtext0); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; flex-shrink: 0; }
.mini-tl .tl-items-wrap { overflow-y: auto; flex: 1; min-height: 80px; }
.mini-tl .tl-item { font-size: 10px; align-items: flex-start; }
.mini-tl .tl-item .msg { white-space: normal; }

/* Main Tabs */
.main-tabs { display: flex; gap: 0; border-bottom: 1px solid var(--surface1); margin-bottom: 10px; flex-shrink: 0; }
.main-tab { background: none; color: var(--subtext0); border: none; border-bottom: 2px solid transparent; padding: 7px 14px; font-size: 12px; font-weight: 600; font-family: inherit; cursor: pointer; transition: color 0.15s, border-color 0.15s; white-space: nowrap; }
.main-tab:hover { color: var(--text); }
.main-tab.active { color: var(--blue); border-bottom-color: var(--blue); }
.main-tab .tab-count { font-size: 9px; font-weight: 400; color: var(--overlay0); margin-left: 4px; background: var(--surface1); padding: 1px 5px; border-radius: 8px; }

/* Timeline full view */
.tl-full { flex: 1; display: flex; flex-direction: column; min-height: 0; gap: 0; }
.tl-full .tl-items { flex: 1; overflow-y: auto; min-height: 200px; }

/* Timeline Tabs + Filter */
.tl-tabs { display: flex; gap: 0; margin: 0 0 2px; border-bottom: 1px solid var(--surface1); flex-shrink: 0; }
.tl-tab { background: none; color: var(--subtext0); border: none; border-bottom: 2px solid transparent; padding: 5px 10px; font-size: 10px; font-family: inherit; cursor: pointer; transition: color 0.15s, border-color 0.15s; white-space: nowrap; }
.tl-tab:hover { color: var(--text); }
.tl-tab.active { color: var(--blue); border-bottom-color: var(--blue); }
.tl-filter { display: flex; gap: 4px; margin: 6px 0; align-items: center; }
.tl-chip { background: var(--surface1); color: var(--subtext0); border: none; border-radius: 4px; padding: 3px 10px; font-size: 9px; font-family: inherit; cursor: pointer; transition: all 0.15s; }
.tl-chip:hover { background: var(--surface2); color: var(--text); }
.tl-chip.active { background: var(--blue); color: var(--bg); }

/* Clear button */
.tl-clear { background: none; border: 1px solid var(--surface2); color: var(--subtext0); border-radius: 4px; padding: 3px 10px; font-size: 9px; font-family: inherit; cursor: pointer; transition: all 0.15s; margin-left: auto; }
.tl-clear:hover { border-color: var(--red); color: var(--red); }

/* Empty */
.empty { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; gap: 12px; color: var(--subtext0); }
.empty .icon { font-size: 56px; animation: float 3s ease-in-out infinite; }
.empty .hint { font-size: 12px; text-align: center; line-height: 1.8; }
.empty code { background: var(--surface0); padding: 2px 8px; border-radius: 4px; font-size: 11px; color: var(--text); }
@keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }

/* å·¥å…·åˆ—åˆ†éš”å€ */
.toolbar-sep { width: 1px; height: 16px; background: var(--surface1); margin: 0 1px; flex-shrink: 0; }
/* é€£ç·šç‡ˆè™Ÿï¼ˆå·¥å…·åˆ—å…§ï¼‰ */
.conn-indicator { display: flex; align-items: center; gap: 5px; padding: 3px 6px; font-size: 10px; color: var(--subtext0); white-space: nowrap; }

/* å…¨èž¢å¹•æ¨¡å¼ */
.layout.fullscreen { grid-template-columns: 1fr; }
.layout.fullscreen .sidebar { display: none; }
.layout.fullscreen .main { padding: 20px 32px; }

/* Timeline æ”¶åˆ */
.timeline .tl-toggle { cursor: pointer; display: flex; align-items: center; justify-content: space-between; user-select: none; }
.timeline .tl-toggle:hover { color: var(--text); }
.timeline .tl-toggle .arrow { font-size: 8px; transition: transform 0.2s; }
.timeline.collapsed .tl-toggle .arrow { transform: rotate(-90deg); }
.timeline.collapsed .tl-items { display: none; }

/* å·¥å…·åˆ— */
.toolbar { display: flex; align-items: center; gap: 4px; margin-left: auto; flex-shrink: 0; }
.tool-btn { background: var(--surface0); border: 1px solid var(--surface1); border-radius: 6px; padding: 4px 9px; font-size: 11px; color: var(--subtext1); cursor: pointer; font-family: inherit; transition: border-color 0.2s, color 0.2s, background 0.2s; display: flex; align-items: center; gap: 4px; white-space: nowrap; }
.tool-btn:hover { border-color: var(--surface2); color: var(--text); background: var(--surface1); }
.tool-btn.active { border-color: var(--blue); color: var(--blue); }

/* å¿«æ·éµæç¤º */
.kbd-toast { position: fixed; top: 12px; right: 12px; background: var(--surface0); border: 1px solid var(--surface1); border-radius: 8px; padding: 8px 14px; font-size: 10px; color: var(--subtext0); z-index: 200; animation: fadeInOut 2s ease forwards; box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
@keyframes fadeInOut { 0% { opacity: 0; transform: translateY(-8px); } 15% { opacity: 1; transform: translateY(0); } 85% { opacity: 1; } 100% { opacity: 0; } }

/* Confetti æ…¶ç¥ */
.confetti-wrap { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 300; overflow: hidden; }
.confetti-piece { position: absolute; top: -10px; opacity: 0; border-radius: 2px; animation: confettiFall var(--dur, 3s) var(--delay, 0s) ease-out forwards; }
@keyframes confettiFall {
  0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
  25% { transform: translateY(25vh) rotate(180deg) scale(0.9); opacity: 1; }
  100% { transform: translateY(105vh) rotate(720deg) scale(0.3); opacity: 0; }
}

/* Session è³‡æºæŒ‡æ¨™ */
.sc-res { display: flex; gap: 8px; margin-top: 3px; font-size: 9px; color: var(--subtext0); }
.sc-res-item { display: flex; align-items: center; gap: 3px; }
.sc-res-bar { width: 28px; height: 3px; background: var(--surface1); border-radius: 2px; overflow: hidden; }
.sc-res-fill { height: 100%; border-radius: 2px; transition: width 0.5s; }
.sc-res-fill.ram { background: var(--purple); }

/* Responsive */
@media (max-width: 1200px) {
  .dash-grid { grid-template-columns: minmax(0, 1fr) minmax(0, 320px); }
}
@media (max-width: 1100px) {
  .dash-grid { grid-template-columns: 1fr; }
  .dash-grid > .mini-tl { grid-column: 1; grid-row: auto; align-self: auto; max-height: 400px; }
}
@media (max-width: 700px) {
  .layout, .layout.collapsed { grid-template-columns: 1fr; grid-template-rows: auto 1fr; --sidebar-w: 1fr; }
  .sidebar { max-height: 160px; border-right: none; border-bottom: 1px solid var(--surface1); }
  .sb-body { flex-direction: row; flex-wrap: wrap; gap: 6px; overflow-x: auto; }
  .sc { min-width: 130px; flex-shrink: 0; }
  .cards { grid-template-columns: 1fr; }
  .main { padding: 10px 12px; gap: 12px; }
  .main h1 { font-size: 13px; flex-wrap: wrap; }
  .toolbar { margin-left: 0; flex-wrap: wrap; flex-shrink: unset; }
  .tool-btn { font-size: 10px; padding: 3px 7px; }
}
