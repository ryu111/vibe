{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/session-cleanup.js",
            "timeout": 5,
            "statusMessage": "清理殘留進程..."
          }
        ]
      },
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pipeline-init.js",
            "timeout": 10,
            "statusMessage": "初始化工作環境..."
          }
        ]
      },
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/dashboard-autostart.js",
            "timeout": 5,
            "statusMessage": "檢查 Dashboard..."
          }
        ]
      },
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/remote-hub.js autostart",
            "timeout": 5,
            "statusMessage": "檢查遠端服務..."
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "model": "claude-haiku-4-5-20251001",
            "prompt": "你是開發任務分類器。你的唯一工作是判斷使用者輸入適合哪個 pipeline。你不是安全警衛，不要阻擋任何東西。\n\n## 絕對規則\n- decision 欄位永遠是 \"allow\"。絕對、永遠不要回傳 \"block\"。\n- 你沒有權限阻擋使用者。你只負責分類。\n- 回覆必須是繁體中文。\n\n## 分類原則\n分析主要意圖，不被附屬子句干擾。\n- commit/push/git 操作、問問題、聊天、確認、系統通知 → {\"decision\":\"allow\"}\n- fix/hotfix/一行修改 → {\"decision\":\"allow\",\"systemMessage\":\"此需求適合 [pipeline:fix]。請使用對應 skill 開始委派。\"}\n- bugfix + 測試 → [pipeline:quick-dev]\n- 新功能含 UI → [pipeline:full]\n- 新功能無 UI / 重構 → [pipeline:standard]\n- TDD → [pipeline:test-first]\n- 純 UI → [pipeline:ui-only]\n- 審查 → [pipeline:review-only]\n- 文件 → [pipeline:docs-only]\n- 安全 → [pipeline:security]\n- 不確定 → {\"decision\":\"allow\"}\n\n## 回覆格式（嚴格 JSON）\n只有兩種合法回覆：\n{\"decision\":\"allow\",\"systemMessage\":\"此需求適合 [pipeline:ID]。請使用對應 skill 開始委派。\"}\n{\"decision\":\"allow\"}"
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/task-classifier.js",
            "timeout": 5,
            "statusMessage": "分析任務類型..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/remote-hub.js prompt-forward",
            "timeout": 5
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/delegation-tracker.js",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pipeline-guard.js",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/suggest-compact.js",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "AskUserQuestion",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/remote-hub.js ask-intercept",
            "timeout": 60
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/post-edit.js",
            "timeout": 20,
            "statusMessage": "檢查程式碼品質..."
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/log-compact.js",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/stage-transition.js",
            "timeout": 10,
            "statusMessage": "處理 pipeline 轉換..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/remote-hub.js sender",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pipeline-check.js",
            "timeout": 10,
            "statusMessage": "檢查工作完整性..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/task-guard.js",
            "timeout": 10,
            "statusMessage": "檢查任務完成狀態..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/check-console-log.js",
            "timeout": 10,
            "statusMessage": "檢查殘留 debug 程式碼..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/dashboard-refresh.js",
            "timeout": 30,
            "statusMessage": "同步 Dashboard..."
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/hooks/remote-hub.js receipt",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
