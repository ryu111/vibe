# Remote â€” Telegram é ç«¯ç›£æ§èˆ‡æ§åˆ¶

Remote è®“ä½ åœ¨æ‰‹æ©Ÿä¸Šå³æ™‚æŒæ¡ Claude Code çš„å·¥ä½œç‹€æ…‹ã€‚

---

## å…©ç¨®æ¨¡å¼

Remote åˆ†ç‚º**è¢«å‹•é€šçŸ¥**å’Œ**ä¸»å‹•æ§åˆ¶**å…©å±¤ã€‚è¢«å‹•å±¤åªéœ€ Telegram Bot å³å¯é‹ä½œï¼›ä¸»å‹•å±¤é¡å¤–éœ€è¦ tmuxã€‚

### è¢«å‹•é€šçŸ¥ï¼ˆç„¡éœ€ tmuxï¼‰

å®‰è£ remote plugin + è¨­å®š Telegram credentials å¾Œè‡ªå‹•ç”Ÿæ•ˆï¼š

| åŠŸèƒ½ | èªªæ˜ | è§¸ç™¼æ™‚æ©Ÿ |
|------|------|----------|
| ä½¿ç”¨è€…è¼¸å…¥è½‰ç™¼ | `ğŸ‘¤ ä½ çš„è¨Šæ¯` | æ¯æ¬¡è¼¸å…¥ prompt |
| å›åˆå‹•ä½œæ‘˜è¦ | `ğŸ“‹ å›åˆï¼šğŸ¤–å›æ‡‰ ğŸ“Ã—2 âš¡Ã—1` | æ¯å€‹å›åˆçµæŸ |
| Pipeline é€²åº¦æ¨æ’­ | `ğŸ” REVIEW âœ… 5m (feature)` | æ¯å€‹ stage å®Œæˆ |
| Pipeline å®Œæˆé€šçŸ¥ | `ğŸ‰ Pipeline å®Œæˆ âœ… (feature) 26m` | æ‰€æœ‰ stage å®Œæˆ |
| AskUserQuestion é€šçŸ¥ | inline keyboard é¸é … | Claude ç™¼å‡ºå•é¡Œæ™‚ |

### ä¸»å‹•æ§åˆ¶ï¼ˆéœ€è¦ tmuxï¼‰

åœ¨ tmux session ä¸­å•Ÿå‹• Claude Code å¾Œï¼Œé¡å¤–è§£é–ï¼š

| åŠŸèƒ½ | èªªæ˜ | æ“ä½œæ–¹å¼ |
|------|------|----------|
| é ç«¯å°è©± | å¾æ‰‹æ©Ÿç™¼æŒ‡ä»¤çµ¦ Claude | `/say <è¨Šæ¯>` æˆ–ç›´æ¥æ‰“å­— |
| å·²è®€å›æ¢ | è¿½è¹¤ Claude è™•ç†ç‹€æ…‹ | `âœ“ å·²å‚³é€` â†’ `âœ… å®Œæˆ` |
| é ç«¯é¸æ“‡ | å›ç­” AskUserQuestion | æŒ‰éˆ•æˆ–æ•¸å­—é¸æ“‡ |
| ç‹€æ…‹æŸ¥è©¢ | æŸ¥çœ‹ session/pipeline é€²åº¦ | `/status` `/stages` |

---

## æµç¨‹åœ–

### è¢«å‹•é€šçŸ¥æµç¨‹

```
ä½¿ç”¨è€…è¼¸å…¥ prompt
    â”‚
    â–¼
UserPromptSubmit hook â”€â”€â†’ Telegram: ğŸ‘¤ {prompt}
    â”‚
    â–¼
Claude å·¥ä½œä¸­...
    â”‚
    â”œâ”€â”€ SubagentStop hookï¼ˆPipeline æ™‚ï¼‰
    â”‚       â”‚
    â”‚       â”œâ”€â”€ å–®ä¸€ stage â”€â”€â†’ Telegram: ğŸ” REVIEW âœ… 5m (feature)
    â”‚       â”‚                              â†’ agent æ‘˜è¦
    â”‚       â”‚                            ğŸ“‹âœ… â†’ ğŸ—ï¸âœ… â†’ ğŸ’»âœ… â†’ ...
    â”‚       â”‚
    â”‚       â””â”€â”€ å…¨éƒ¨å®Œæˆ â”€â”€â†’ Telegram: ğŸ‰ Pipeline å®Œæˆ âœ… (feature) 26m
    â”‚                                   ğŸ“‹âœ… â†’ ğŸ—ï¸âœ… â†’ ğŸ’»âœ… â†’ ...
    â”‚
    â–¼
Stop hookï¼ˆå›åˆçµæŸï¼‰
    â”‚
    â”œâ”€â”€ æœ‰ say-pending â”€â”€â†’ editMessageText: âœ… å®Œæˆï¼ˆæ›´æ–° âœ“ å·²å‚³é€ï¼‰
    â”‚
    â””â”€â”€ ç„¡ say-pending â”€â”€â†’ Telegram: ğŸ“‹ å›åˆï¼šğŸ¤–å›æ‡‰ ğŸ“Ã—2 âœï¸Ã—3 âš¡Ã—1
```

### ä¸»å‹•æ§åˆ¶æµç¨‹

```
Telegram æ”¶åˆ°è¨Šæ¯
    â”‚
    â”œâ”€â”€ /say <è¨Šæ¯> æˆ–ç›´æ¥æ‰“å­—
    â”‚       â”‚
    â”‚       â”œâ”€â”€ æœ‰ AskUserQuestion pending
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â”€ æ•¸å­— â”€â”€â†’ å–®é¸ï¼štmux navigate + Enter â†’ âœ… å·²é¸æ“‡ï¼š{label}
    â”‚       â”‚       â”‚            å¤šé¸ï¼štmux toggle â†’ âœ… å·²å‹¾é¸ï¼š{labels}
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â”€ ok â”€â”€â†’ tmux confirm submit â†’ âœ… å·²ç¢ºèªæäº¤
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â”€ å…¶ä»–æ–‡å­— â”€â”€â†’ Esc + sendKeys â†’ âœ… å·²å‚³é€
    â”‚       â”‚
    â”‚       â””â”€â”€ ç„¡ pending â”€â”€â†’ tmux send-keys â†’ âœ“ å·²å‚³é€ â†’ (Stop hook) â†’ âœ… å®Œæˆ
    â”‚
    â”œâ”€â”€ /status â”€â”€â†’ ğŸ“Š æ´»èº Session åˆ—è¡¨
    â”œâ”€â”€ /stages â”€â”€â†’ ğŸ“‹ Stage è©³æƒ…
    â”œâ”€â”€ /ping â”€â”€â†’ ğŸ“ pong + uptime
    â”œâ”€â”€ /tmux â”€â”€â†’ âœ… tmux å·²é€£ç·š / âŒ tmux æœªé€£ç·š
    â””â”€â”€ /help â”€â”€â†’ æŒ‡ä»¤åˆ—è¡¨
```

### AskUserQuestion äº’å‹•æµç¨‹

```
Claude å‘¼å« AskUserQuestion
    â”‚
    â–¼
PreToolUse hookï¼ˆéé˜»æ“‹ï¼‰
    â”‚
    â”œâ”€â”€ ç™¼é€ inline keyboard é€šçŸ¥åˆ° Telegram
    â”œâ”€â”€ å¯« pending file
    â””â”€â”€ æ”¾è¡Œ TUIï¼ˆä½¿ç”¨è€…ä¹Ÿå¯åœ¨çµ‚ç«¯æ“ä½œï¼‰

é›™é€šé“å›ç­”ï¼šTUI æˆ– Telegramï¼Œèª°å…ˆç”¨èª°çš„

Telegram æ“ä½œï¼ˆæŒ‰éˆ• callbackï¼‰
    â”‚
    â”œâ”€â”€ å–®é¸æŒ‰éˆ• â”€â”€â†’ navigate + Enter
    â”‚                 editMessageText: ğŸ“‹ {header}\n\nâœ… å·²é¸æ“‡ï¼š{label}
    â”‚
    â”œâ”€â”€ å¤šé¸æŒ‰éˆ• â”€â”€â†’ toggle checkbox
    â”‚                 keyboard æ›´æ–°: â˜‘/â˜ ç‹€æ…‹åˆ‡æ›
    â”‚                 æŒ‰ã€Œâœ” ç¢ºèªã€â†’ Tab + EnterÃ—2
    â”‚
    â””â”€â”€ å¤šé¡Œ â”€â”€â†’ è‡ªå‹•æ¨é€²: âœ… Q1: {label} + ç™¼é€ä¸‹ä¸€é¡Œ keyboard
```

---

## è¨Šæ¯æ ¼å¼è¦æ ¼

> ä»¥ä¸‹ç‚ºæ‰€æœ‰ Telegram è¨Šæ¯çš„ç²¾ç¢ºæ ¼å¼ã€‚E2E æ¸¬è©¦ä¾æ“šæ­¤ spec é©—è­‰ã€‚

### è¢«å‹•é€šçŸ¥

#### P1. ä½¿ç”¨è€…è¼¸å…¥è½‰ç™¼

**è§¸ç™¼**ï¼šUserPromptSubmit hook
**æ ¼å¼**ï¼š`ğŸ‘¤ {prompt}`
**æˆªæ–·**ï¼š3900 å­— + `\nâ€¦ (æˆªæ–·)`

```
ğŸ‘¤ å¹«æˆ‘å¯¦ä½œèªè­‰åŠŸèƒ½
```

#### P2. å›åˆå‹•ä½œæ‘˜è¦

**è§¸ç™¼**ï¼šStop hookï¼ˆç„¡ say-pendingã€ç¯€æµ 10 ç§’ï¼‰
**æ ¼å¼**ï¼š`ğŸ“‹ å›åˆï¼š{parts}`

parts çµ„æˆï¼ˆæœ‰å‰‡åŠ ã€ç„¡å‰‡çœï¼‰ï¼š
- `ğŸ¤–å›æ‡‰` â€” æœ‰æ–‡å­—å›æ‡‰æ™‚
- `ğŸ“Ã—N` â€” Write æ¬¡æ•¸
- `âœï¸Ã—N` â€” Edit æ¬¡æ•¸
- `âš¡Ã—N` â€” Bash æ¬¡æ•¸
- `ğŸ¤–Ã—N` â€” Task æ¬¡æ•¸
- `ğŸ”Ã—N` â€” Grep/Glob æ¬¡æ•¸
- `ğŸ“–Ã—N` â€” Read æ¬¡æ•¸

```
ğŸ“‹ å›åˆï¼šğŸ¤–å›æ‡‰ ğŸ“Ã—2 âœï¸Ã—3 âš¡Ã—1
ğŸ“‹ å›åˆï¼šğŸ¤–å›æ‡‰                       # ç´”æ–‡å­—å›è¦†
ğŸ“‹ å›åˆï¼šâš¡Ã—5 ğŸ”Ã—3                    # ç´”å·¥å…·æ“ä½œ
```

#### P3. /say å·²è®€å›æ¢

**è§¸ç™¼**ï¼šStop hookï¼ˆæœ‰ say-pendingï¼‰
**è¡Œç‚º**ï¼šeditMessageText æ›´æ–°åŸè¨Šæ¯
**æ ¼å¼**ï¼š`âœ… å®Œæˆ`

```
âœ“ å·²å‚³é€    â† /say ç™¼é€æ™‚
âœ… å®Œæˆ      â† Stop hook æ›´æ–°
```

#### P4. Pipeline stage å®Œæˆ

**è§¸ç™¼**ï¼šSubagentStop hook
**æ ¼å¼**ï¼š`{emoji} {STAGE} {verdict} {duration} ({taskType}) {retry}\n  â†’ {summary}\n{progressBar}`

```
ğŸ” REVIEW âœ… 5m (feature)
  â†’ ç¨‹å¼ç¢¼å“è³ªè‰¯å¥½ï¼Œç„¡é‡å¤§å•é¡Œ
ğŸ“‹âœ… â†’ ğŸ—ï¸âœ… â†’ ğŸ’»âœ… â†’ ğŸ”âœ… â†’ ğŸ§ªâ¬œ â†’ âœ…â¬œ â†’ ğŸŒâ¬œ â†’ ğŸ“â¬œ
```

FAIL + retryï¼š
```
ğŸ” REVIEW âŒ 3m (feature) (retry 1/3)
  â†’ SQL injection é¢¨éšªã€ç¼ºå°‘è¼¸å…¥é©—è­‰
ğŸ“‹âœ… â†’ ğŸ—ï¸âœ… â†’ ğŸ’»âœ… â†’ ğŸ”âŒ â†’ ğŸ§ªâ¬œ â†’ âœ…â¬œ â†’ ğŸŒâ¬œ â†’ ğŸ“â¬œ
```

Stage emoji å°ç…§ï¼šğŸ“‹ PLAN / ğŸ—ï¸ ARCH / ğŸ’» DEV / ğŸ” REVIEW / ğŸ§ª TEST / âœ… QA / ğŸŒ E2E / ğŸ“ DOCS

#### P5. Pipeline å®Œæˆ

**è§¸ç™¼**ï¼šSubagentStop hookï¼ˆæ‰€æœ‰ stage å®Œæˆï¼‰
**æ ¼å¼**ï¼š`ğŸ‰ Pipeline å®Œæˆ {verdict} ({taskType}) {totalDuration}\n{progressBar}`

```
ğŸ‰ Pipeline å®Œæˆ âœ… (feature) 26m
ğŸ“‹âœ… â†’ ğŸ—ï¸âœ… â†’ ğŸ’»âœ… â†’ ğŸ”âœ… â†’ ğŸ§ªâœ… â†’ âœ…âœ… â†’ ğŸŒâœ… â†’ ğŸ“âœ…
```

#### P6. AskUserQuestion é€šçŸ¥

**è§¸ç™¼**ï¼šPreToolUse hookï¼ˆAskUserQuestionï¼‰
**æ ¼å¼**ï¼šinline keyboard + æ–‡å­—

å–®é¸ï¼š
```
ğŸ“‹ ä¸‹ä¸€æ­¥æƒ³åšä»€éº¼ï¼Ÿ

1. æ¨é€åˆ° remote â€” git push + marketplace sync
2. æ¸¬è©¦æˆåŠŸ â€” ç¢ºèªå…¨éƒ¨åŠŸèƒ½æ­£å¸¸
3. é‚„æœ‰å•é¡Œ â€” éœ€è¦ç¹¼çºŒèª¿æ•´

ğŸ‘‰ é»æŒ‰éˆ•æˆ–å›è¦†æ•¸å­—å³å¯é¸æ“‡

[æ¨é€åˆ° remote]
[æ¸¬è©¦æˆåŠŸ]
[é‚„æœ‰å•é¡Œ]
```

å¤šé¸ï¼š
```
ğŸ“‹ é¸æ“‡è¦å•Ÿç”¨çš„åŠŸèƒ½ï¼š

1. åŠŸèƒ½ A â€” èªªæ˜
2. åŠŸèƒ½ B â€” èªªæ˜

ğŸ‘‰ é»æŒ‰éˆ•æˆ–æ•¸å­—å‹¾é¸ï¼Œè¼¸å…¥ ok ç¢ºèª

[â˜ åŠŸèƒ½ A]
[â˜ åŠŸèƒ½ B]
[âœ” ç¢ºèª]
```

### ä¸»å‹•æ§åˆ¶ï¼ˆTelegram æŒ‡ä»¤å›è¦†ï¼‰

#### C1. /say æˆåŠŸ

```
âœ“ å·²å‚³é€
```

(Stop hook å¾Œ editMessageText â†’ `âœ… å®Œæˆ`)

#### C2. /say å¤±æ•—

```
âŒ tmux å‚³é€å¤±æ•—ï¼š{error}
```

#### C3. /say ç„¡åƒæ•¸

```
âš ï¸ ç”¨æ³•ï¼š`/say <è¨Šæ¯>`
```

#### C4. /status æœ‰ session

```
ğŸ“Š *æ´»èº Session*
`a1b2c3d4` feature 75%
`e5f6g7h8` refactor 50%
```

#### C5. /status ç„¡ session

```
ğŸ’­ ç„¡æ´»èºçš„ Pipeline session
```

#### C6. /stages æœ‰çµæœ

```
ğŸ“‹ *Session `a1b2c3d4`*
ğŸ“‹ PLAN âœ…
ğŸ—ï¸ ARCH âœ…
ğŸ’» DEV âœ…
ğŸ” REVIEW âŒ:HIGH
ğŸ§ª TEST â¬œ
âœ… QA â¬œ
ğŸŒ E2E â¬œ
ğŸ“ DOCS â¬œ
```

#### C7. /stages ç„¡çµæœ

```
âŒ æ‰¾ä¸åˆ° session `{sid}`
ğŸ’­ ç„¡æ´»èºçš„ Pipeline session      # ç„¡åƒæ•¸ä¸”ç„¡ session
```

#### C8. /ping

```
ğŸ“ pong
Uptime: 2h30m15s
```

#### C9. /tmux å·²é€£ç·š

```
âœ… tmux å·²é€£ç·š
Pane: `%0`
```

#### C10. /tmux æœªé€£ç·š

```
âŒ tmux æœªé€£ç·š
è«‹åœ¨ tmux å…§å•Ÿå‹• Claude Code
```

#### C11. tmux æœªé€£ç·šæ™‚æ“ä½œ

```
âŒ tmux æœªé€£ç·š
```

### AskUserQuestion äº’å‹•å›è¦†

#### A1. å–®é¸æŒ‰éˆ• â€” ä¸€æ­¥å®Œæˆ

editMessageTextï¼ˆå–ä»£åŸè¨Šæ¯ï¼‰ï¼š
```
ğŸ“‹ ä¸‹ä¸€æ­¥æƒ³åšä»€éº¼ï¼Ÿ

âœ… å·²é¸æ“‡ï¼šæ¸¬è©¦æˆåŠŸ
```

#### A2. å¤šé¸æŒ‰éˆ• â€” toggle

keyboard å°±åœ°æ›´æ–°ï¼ˆâ˜ â†” â˜‘ï¼‰ï¼š
```
[â˜‘ åŠŸèƒ½ A]
[â˜ åŠŸèƒ½ B]
[âœ” ç¢ºèª]
```

#### A3. å¤šé¸ç¢ºèª

```
âœ… å·²ç¢ºèªæäº¤
```

#### A4. æ•¸å­—å›è¦† â€” å–®é¸

```
âœ… å·²é¸æ“‡ï¼š{label}
```

#### A5. æ•¸å­—å›è¦† â€” å¤šé¸ toggle

```
âœ… å·²å‹¾é¸ï¼šåŠŸèƒ½ A, åŠŸèƒ½ C

ğŸ‘‰ è¼¸å…¥ ok ç¢ºèªï¼Œæˆ–åœ¨çµ‚ç«¯æ“ä½œ
```

#### A6. æ•¸å­—å›è¦† â€” ok ç¢ºèª

```
âœ… å·²ç¢ºèªæäº¤
```

#### A7. è‡ªç”±å°è©±ï¼ˆéæ•¸å­—/é okï¼‰

editMessageTextï¼ˆåŸå•é¡Œè¨Šæ¯ï¼‰ï¼š
```
ğŸ“‹ ä¸‹ä¸€æ­¥æƒ³åšä»€éº¼ï¼Ÿ

ğŸ’¬ æˆ‘æƒ³å…ˆçœ‹çœ‹ç¨‹å¼ç¢¼
```

æ–°è¨Šæ¯ï¼š
```
âœ… å·²å‚³é€
```

#### A8. å¤šé¸èª¿æ•´ï¼ˆç¢ºèªå‰å† toggleï¼‰

```
ğŸ”„ å·²åˆ‡æ›ï¼šåŠŸèƒ½ B

ğŸ‘‰ è¼¸å…¥ ok ç¢ºèª
```

#### A9. å¤šé¡Œè‡ªå‹•æ¨é€²

```
âœ… Q1: æ¸¬è©¦æˆåŠŸ              # ä¸Šä¸€é¡Œçµæœ
ğŸ“‹ ç¬¬äºŒå€‹å•é¡Œï¼Ÿ              # ä¸‹ä¸€é¡Œé€šçŸ¥ï¼ˆå¸¶æ–° keyboardï¼‰
```

#### A10. Callback éæœŸ

```
âŒ å·²éæœŸ
```

---

## å¿«é€Ÿé–‹å§‹

### 1. è¨­å®š Telegram Bot

```bash
# åœ¨ Claude Code ä¸­åŸ·è¡Œ
/remote-config guide
```

æˆ–æ‰‹å‹•ï¼š
1. åœ¨ Telegram æ‰¾ @BotFather â†’ `/newbot` â†’ å–å¾— **Bot Token**
2. æ‰¾ @userinfobot â†’ å–å¾—ä½ çš„ **Chat ID**
3. å¯«å…¥ `~/.claude/remote.env`ï¼š

```
TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
TELEGRAM_CHAT_ID=987654321
```

### 2. å•Ÿå‹•ï¼ˆè¢«å‹•æ¨¡å¼è‡ªå‹•ç”Ÿæ•ˆï¼‰

å®‰è£ plugin å¾Œï¼ŒSessionStart hook æœƒè‡ªå‹•å•Ÿå‹• bot daemonã€‚è¢«å‹•é€šçŸ¥ç«‹å³å¯ç”¨ã€‚

### 3. å•Ÿç”¨ä¸»å‹•æ§åˆ¶ï¼ˆtmuxï¼‰

```bash
tmux new -s claude    # å»ºç«‹ tmux session
claude                # åœ¨ tmux å…§å•Ÿå‹• Claude Code
```

> æ²’æœ‰ tmux å°±ç„¡æ³•ã€Œæ‰“å­—åˆ° Claudeã€ï¼Œä½†é€šçŸ¥å’ŒæŸ¥è©¢ä»ç„¶æ­£å¸¸é‹ä½œã€‚

---

## Claude Code æŒ‡ä»¤

| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| `/remote start` | æ‰‹å‹•å•Ÿå‹• bot daemon |
| `/remote stop` | åœæ­¢ bot daemon |
| `/remote status` | æŸ¥çœ‹ daemon ç‹€æ…‹ |
| `/remote test` | ç™¼é€æ¸¬è©¦è¨Šæ¯ |
| `/remote-config` | è¨­å®šæ•™å­¸èˆ‡é©—è­‰ |

---

## å®‰å…¨

- åªå›æ‡‰æŒ‡å®š `TELEGRAM_CHAT_ID` çš„è¨Šæ¯
- Credentials æ”¯æ´ç’°å¢ƒè®Šæ•¸æˆ– `.env` æª”æ¡ˆï¼ˆä¸é€² gitï¼‰
- ç¼ºå°‘ credentials æ™‚æ‰€æœ‰åŠŸèƒ½éœé»˜é™ç´šï¼ˆä¸å ±éŒ¯ï¼‰
- æ‰€æœ‰ `/say` æŒ‡ä»¤è¨˜éŒ„åˆ° `~/.claude/remote-bot.log`
